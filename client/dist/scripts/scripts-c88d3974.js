!function(){"use strict";angular.module("asafertrip",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ngAnimate"]).config(["$routeProvider",function(e){e.otherwise({redirectTo:"/"})}])}(),function(){"use strict";angular.module("asafertrip").factory("googleServices",[function(){var e=new google.maps.Geocoder;return{getAddress:function(t,o,n){var i={latLng:n};e.geocode(i,function(e,o){o==google.maps.GeocoderStatus.OK?e[1]?t(e[1].formatted_address):alert("No results found"):alert("Geocoder failed due to: "+o)})}}}])}(),function(){"use strict";angular.module("asafertrip").factory("musicServices",[function(){return{getData:function(){return[{sampleUrl:"resources/cat.wav",startTime:0,sentence:"sentence 1"},{sampleUrl:"resources/cow.wav",startTime:3e3,sentence:"sentence 2"},{sampleUrl:"resources/cow.wav",startTime:5e3,sentence:"sentence 3"},{sampleUrl:"resources/cat.wav",startTime:7e3,sentence:"sentence 4"}]},setLocations:function(e){this.locations=e},getLocations:function(){return this.locations}}}])}(),function(){"use strict";angular.module("asafertrip").factory("audioBufferServices",[function(){function e(e,t){var n=[];return t.forEach(function(t){n.push({sampleUrl:t.sampleUrl,startTime:t.startTime,source:o(e,t.sampleUrl)})}),n}function t(e){e.forEach(function(e){window.setTimeout(function(){e.source.start()},e.startTime)})}function o(e,t){var o=new XMLHttpRequest,n=e.createBufferSource();return o.open("GET",t,!0),o.responseType="arraybuffer",o.onload=function(){var t=o.response;e.decodeAudioData(t,function(t){n.buffer=t,n.connect(e.destination)},function(e){"Error decoding the audio data"+e.err})},o.send(),n}return{playSound:function(o){var n=new(window.AudioContext||window.webkitAudioContext),i=e(n,o);t(i)}}}])}(),function(){"use strict";angular.module("asafertrip").directive("googleMaps",["googleServices","$rootScope",function(e,t){return{scope:{},template:'<div id="maps" class="google-maps"></div>',link:function(o){var n,i,r=[],a=new google.maps.DirectionsService,s=function(){google.maps.event.addListener(n,"click",function(t){if(!r.origin||!r.destination){var o=r.origin?"destination":"origin";u(o,t.latLng),e.getAddress(function(e){f(o,e)},function(){},t.latLng)}})},c=function(){if(r.origin&&r.destination){var e=r.origin.getPosition(),t=r.destination.getPosition(),o={origin:e,destination:t,travelMode:google.maps.TravelMode.DRIVING};a.route(o,function(e,t){if(t===google.maps.DirectionsStatus.OK){l(),i.setDirections(e);var o=e.routes[0].legs[0];u("origin",o.start_location),u("destination",o.end_location)}})}},u=function(e,t){r[e]=new google.maps.Marker({position:t,map:n,title:e,icon:{url:"images/pin-"+e+".png"}})},l=function(){r.origin.setVisible(!1),r.destination.setVisible(!1)},d=function(){var e={center:{lat:-37.8131869,lng:144.96297960000004},zoom:8},t=[{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]}];i=new google.maps.DirectionsRenderer({suppressMarkers:!0}),n=new google.maps.Map(document.getElementById("maps"),e);var o=new google.maps.StyledMapType(t,{name:"Styled Map"});n.mapTypes.set("map_style",o),n.setMapTypeId("map_style"),i.setMap(n),s()},f=function(e,o){t.$broadcast("markerAdded",{marker:e,address:o}),c()};o.$on("autocompleteChanged",function(e,t){u(t.marker,t.geometry.location),c()}),d()}}}])}(),function(){"use strict";angular.module("asafertrip").directive("googleAutocomplete",["$rootScope",function(e){return{scope:{marker:"@"},link:function(t,o){var n=new google.maps.places.Autocomplete(o[0]);google.maps.event.addListener(n,"place_changed",function(){var o=n.getPlace();return o.geometry?void e.$broadcast("autocompleteChanged",{marker:t.marker,geometry:o.geometry}):void window.alert("Autocomplete's returned place contains no geometry")})}}}])}(),function(){"use strict";function e(){try{window.AudioContext=window.AudioContext||window.webkitAudioContext,t=new AudioContext}catch(e){alert("Web Audio API is not supported in this browser")}}var t;window.addEventListener("load",e,!1)}(),function(){"use strict";angular.module("asafertrip").config(["$routeProvider",function(e){e.when("/",{templateUrl:"/components/direction/direction.html",controller:"DirectionController",controllerAs:"directionCtrl"}).otherwise({redirectTo:"/"})}])}(),function(){"use strict";angular.module("asafertrip").controller("DirectionController",["$scope","musicServices","$location",function(e,t,o){e.locations={},e.$on("markerAdded",function(t,o){e.$apply(function(){e.locations[o.marker]=o.address})}),e.submitLocations=function(){t.setLocations(e.locations),o.path("/music")}}])}(),function(){"use strict";angular.module("asafertrip").config(["$routeProvider",function(e){e.when("/music",{templateUrl:"/components/music/music.html",controller:"MusicController",controllerAs:"musicCtrl"})}])}(),function(){"use strict";angular.module("asafertrip").controller("MusicController",["$scope","musicServices","audioBufferServices","$timeout","$interval",function(e,t,o,n,i){var r,a=function(){e.sentences=[],e.locations={},e.musics=t.getData(),e.increaseWidth=0,e.locations=t.getLocations(),o.playSound(e.musics),s(e.musics),c(),u()},s=function(t){t.forEach(function(t){n(function(){e.sentences.push(t.sentence)},t.startTime)})},c=function(){r=i(function(){e.increaseWidth+=.36},100)},u=function(){n(function(){clearInterval(r)},3e4)};a()}])}();